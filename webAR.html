<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>ARイベンター</title>
        <link rel="stylesheet" href="/css/eventer/reset.css">
        <link rel="stylesheet" href="/css/eventer/webAR.css">
        <script src="/js/jquery-3.4.1.min.js"></script>

        <!-- A-Frame ライブラリの読み込み -->
        <script src="https://aframe.io/releases/0.9.2/aframe.min.js"></script>
        <!-- AR.js ライブラリの読み込み -->
        <script src="https://jeromeetienne.github.io/AR.js/aframe/build/aframe-ar.js"></script>
        <!-- HTML要素をA-Frame内に配置するスクリプト -->
        <script src="/js/aframe-html-shader.min.js"></script>
        <script src="/js/eventer/utility.js"></script>
        <script src="/js/eventer/camera.js"></script>

    </head>
    <body>
        <input type="hidden" name="content_id" value="" />

        <div style="position: fixed; z-index: -3; overflow: hidden" class="stash" ></div>

        <!-- 展示者情報 start -->
        @foreach ($contents as $key => $content)
            <!-- 展示者名 -->
            <div id="exhibitor_name_{{ $key }}" style="position: fixed; z-index: -4; overflow: hidden">
                <p class="exhibitorName">{{ $content->exhibitor_name }}</p>
            </div>
            <!-- コンテンツ名 -->
            <div id="content_name_{{ $key }}" style="position: fixed; z-index: -4; overflow: hidden">
                <p class="roundFrame">{{ $content->content_name }}</p>
            </div>
            <!-- コンテンツの詳細 -->
            <div id="content_description_{{ $key }}" style="position: fixed; z-index: -4; overflow: hidden">
                <p class="contentsText">{{ $content->content_description }}</p>
            </div>
        @endforeach
        <!-- 展示者情報 end -->

        <!-- A-FrameStart -->
        <a-scene embedded arjs="debugUIEnabled:false;trackingMethod:best;" vr-mode-ui="enabled: false">

            <!-- オブジェクトファイルとマテリアルファイルを読み込む -->
            <a-assets>
                <img id="background_image1" src="/images/effect/sky.jpg">
                <img id="background_image2" src="/images/effect/sunset.jpg">
                <img id="background_image3" src="/images/effect/cosmos.jpg">
                <img id="background_image4" src="/images/effect/newyork.jpg">
                <img id="background_image5" src="/images/effect/stars.jpg">
                <img id="background_image6" src="/images/effect/trees.jpg">
            </a-assets>

            @foreach ($contents as $key => $content)

            <a-marker type="pattern" id="{{ $content->id }}" url="/images/marker_pattern/{{ $content->marker_pattern_file_name }}" registerevents>
                <!-- 展示者名 -->
                <a-plane width="0.9" height="0.2" position="0.5 0.1 -0.65" material="shader: html; target: #exhibitor_name_{{ $key }}" rotation="-100 0 0"></a-plane>

                <!-- コンテンツ名 -->
                <a-plane width="0.9" height="0.2" position="0.5 0.1 -0.4" material="shader: html; target: #content_name_{{ $key }}" rotation="-100 0 0"></a-plane>

                <!-- コンテンツの詳細 -->
                <a-plane width="1.1" height="0.7" position="0.5 0.1 0.8" material="shader: html; target: #content_description_{{ $key }}" rotation="-100 0 0"></a-plane>

                <!-- 展示者写真-->
                <a-image width="0.8" height="1.3" rotation="-90 0 0"  position="-0.3 -0.1 -0.08" src="/images/exhibitor/{{ $content->face_image_file_name }}" alt="contents"></a-image>

                <!-- コンテンツの写真-->
                @if (isset($content->content_image_file_name)
                && $content->content_image_file_name != '')
                    <a-image class="content_image_{{ $content->id }}" width="{{ $content->width }}" height="0.6" class="exhibitorImg" rotation="-90 0 0"  position="0.5 0.1 0.07" src="/images/content/{{ $content->content_image_file_name }}" alt="contents"></a-image>
                @endif

                <!-- 背景画像 -->
                <a-box src="#background_image{{ rand(1, 6) }}" position="-0.3 -0.5 0" rotation="0 0 0" scale="5 0.1 5">
                </a-box>

            </a-marker>
            @endforeach

            <!-- カメラ起動 -->
            <a-entity camera></a-entity>
        </a-scene>

        <!-- フッターボタン -->
        <div id="camera_footer" class="Frame_box pcWindow displayNone">
            <div class="Frame color" ontouchstart="">
                <td>
                    <a class="comment_link" href="javascript::void(0);" class="color">コメント一覧</a>
                </td>
            </div>
            <div class="Frame MarginLeft color" ontouchstart="">
                <td>
                    <a class="detail_link" href="javascript::void(0);" class="color">詳細ページ</a>
                </td>
            </div>
            <td>
                <input type="image" name="send_liked_button" class="sendLikedButton displayNone" src="/images/eventer/not_like.png" />
                <input type="image" name="send_not_liked_button" class="sendNotLikedButton displayNone" src="/images/eventer/like.png" />
            </td>
        </div>
    </body>
</html>
